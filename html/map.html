<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Find a Farm</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjYCKQ10b4HQRt28IodYoD3ORlGaz7Rhs&loading=async&callback=console.debug&libraries=maps,marker&v=beta">
    </script>
  </head>
  <body class="has-background-primary">
    <div id="nav-placeholder"></div>
    <div class="columns">
      <div class="column is-two-fifths">
        <div class="control m-2">
          <div class="columns">
            <div class="column pr-0">
              <div class="select">
                <select id="state">
                  <option value="AL">Alabama</option>
                  <option value="AK">Alaska</option>
                  <option value="AZ">Arizona</option>
                  <option value="AR">Arkansas</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="CT">Connecticut</option>
                  <option value="DE">Delaware</option>
                  <option value="DC">District Of Columbia</option>
                  <option value="FL">Florida</option>
                  <option value="GA">Georgia</option>
                  <option value="HI">Hawaii</option>
                  <option value="ID">Idaho</option>
                  <option value="IL">Illinois</option>
                  <option value="IN">Indiana</option>
                  <option value="IA">Iowa</option>
                  <option value="KS">Kansas</option>
                  <option value="KY">Kentucky</option>
                  <option value="LA">Louisiana</option>
                  <option value="ME">Maine</option>
                  <option value="MD">Maryland</option>
                  <option value="MA">Massachusetts</option>
                  <option value="MI">Michigan</option>
                  <option value="MN">Minnesota</option>
                  <option value="MS">Mississippi</option>
                  <option value="MO">Missouri</option>
                  <option value="MT">Montana</option>
                  <option value="NE">Nebraska</option>
                  <option value="NV">Nevada</option>
                  <option value="NH">New Hampshire</option>
                  <option value="NJ">New Jersey</option>
                  <option value="NM">New Mexico</option>
                  <option value="NY">New York</option>
                  <option value="NC">North Carolina</option>
                  <option value="ND">North Dakota</option>
                  <option value="OH">Ohio</option>
                  <option value="OK">Oklahoma</option>
                  <option value="OR">Oregon</option>
                  <option value="PA">Pennsylvania</option>
                  <option value="RI">Rhode Island</option>
                  <option value="SC">South Carolina</option>
                  <option value="SD">South Dakota</option>
                  <option value="TN">Tennessee</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                  <option value="VT">Vermont</option>
                  <option value="VA">Virginia</option>
                  <option value="WA">Washington</option>
                  <option value="WV">West Virginia</option>
                  <option value="WI">Wisconsin</option>
                  <option value="WY">Wyoming</option>
                </select>
              </div>
            </div>
            <div class="column pr-0">
              <!-- <input class="input" id="zipcode" type="number" max="99999" placeholder="Enter Zip Code" /> -->
              <div class="select">
                <select id="organization-type">
                  <option value="csa">Community Assisted Agriculture</option>
                  <option value="farmersmarket">Farmers Market</option>
                  <option value="foodhub">Foodhub</option>
                </select>
              </div>
            </div>
            <div class="column pr-0">
              <button id="submit" class="button is-link is-fullwidth">Search</button>  
              <script type="module" src="/src/search.js"></script>
            </div>
          </div>
          <div class="columns is-centered">
            <div class="column is-three-fifths">
              <div id="displayListing"></div>
              <script>
                function show_on_map(lon, lat) {
                  let gmap = document.getElementById('gmap')
                  let listing_marker = document.getElementById('listing-marker')

                  const coords = new google.maps.LatLng(lon, lat)

                  listing_marker.position = coords
                  gmap.center = coords

                  $('html, body').animate({ scrollTop: 0 }, 'fast');
                }    
              </script>
            </div>
          </div>
        </div>
      </div>
      <div id="displayMap" class="column mr-2">
        <gmp-map id="gmap" style="height: 95vh;" center="39.64449, -86.86473" zoom="14" map-id="DEMO_MAP_ID">
          <gmp-advanced-marker id="listing-marker" position="39.64449,-86.86473" title="Listing"></gmp-advanced-marker>
        </gmp-map>
      </div>
    </div>
    <script>
      $(function(){
        $("#nav-placeholder").load("nav.html");
      });
    </script>
  </body>